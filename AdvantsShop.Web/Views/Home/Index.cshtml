@using AdvantShop.Web.Models;

@model MainViewModel

<div class="row d-flex justify-content-evenly">

    <div class="col-3" style="padding-right:2.5rem;">
        <ul class="dropdown-menu show catalog-menu p-0">
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Одежда<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Мебель<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Бытовая техника<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Спортивные товары<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Косметика<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Садовая техника<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Строительные материалы<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Автотехника<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Еда<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
            <li>
                <a class="dropdown-item py-3 d-flex justify-content-between" href="#">
                    Разработка сайтов<img src="~/icons/arrow-right.svg" />
                </a>
            </li>
        </ul>

        <div class="mt-4 news-catalog">
            <h4 class="mb-4">Статьи</h4>

            <a class="news-item" href="#">
                <small>Меган Фокс  в апрельском номере журнала Jalouse</small>
                <p>03 апреля 2015</p>
            </a>

            <a class="news-item" href="#">
                <small>Состоялся показ Armani Prive на Неделе высокой моды в Париже</small>
                <p>11 марта 2015</p>
            </a>

            <a class="news-item" href="#">
                <small>Облачные перспективы Windows-8</small>
                <p>11 февраля 2015</p>
            </a>

            <p id="news-expander">Все новости</p>
        </div>

        <div class="bg-grey rounded px-5 py-4">
            <h5>
                Проверить
                <br />
                статус заказа
            </h5>

            <input class="form-text txb mb-2 p-2 rounded border-0" placeholder="Введите номер заказа" />

            <button class="btn btn-primary primary">Проверить</button>
        </div>

        <div class="mt-4 mb-5">
            <h4>Опрос</h4>
            <small>Как вам новый дизайн?</small>

            <div class="mt-3 secondary">
                <div class="form-check mb-3">
                    <input type="radio" class="form-check-input" id="radio1" name="designRating" value="option1" checked>
                    Очень удобно!
                    <label class="form-check-label" for="radio1"></label>
                </div>
                <div class="form-check mb-3">
                    <input type="radio" class="form-check-input" id="radio2" name="designRating" value="option2">
                    Не пользуюсь, хватает одной темы
                    <label class="form-check-label" for="radio2"></label>
                </div>
                <div class="form-check">
                    <input type="radio" class="form-check-input" id="radio3" name="designRating" value="option3">
                    Что такое трансформер?
                    <label class="form-check-label" for="radio3"></label>
                </div>
            </div>

            <button class="btn btn-primary primary mt-3 ms-0 py-2 px-3">Голосовать</button>
        </div>

        <div id="vk_groups"></div>
    </div>

    <div class="col-9 mb-5" style="padding-left: 0.53rem;">
        <div class="container-fluid carousel slide carousel-fade" id="adv-carousel" data-bs-ride="carousel">

            <ol class="carousel-indicators justify-content-end carousel-indicators-rounded gap-2 m-0 mb-5 pe-5">
                <li class="active" data-bs-target="#adv-carousel" data-bs-slide-to="0"></li>

                @for (int i = 1; i < Model.Slides.Count + 1; i++)
                {
                    <li data-bs-target="#adv-carousel" data-bs-slide-to="@i"></li>
                }
            </ol>

            <div class="carousel-inner rounded">
                @{
                    var firstSlide = Model.Slides.First();

                    <div class="carousel-item active">
                        <img class="d-block w-100" src="@firstSlide.ImagePath" />
                        <div class="box-shadow-gradient"></div>
                        <div class="carousel-caption d-block d-flex justify-content-start mb-4">
                            <div class="carousel-item-content text-start">
                                <p class="carousel-title">
                                    @firstSlide.Title
                                </p>
                                <p>@firstSlide.Description</p>
                                <button class="btn btn-outline-light py-3 px-5 mt-2">Посмотреть каталог</button>
                            </div>
                        </div>
                    </div>
                }

                @foreach (var slide in Model.Slides.Skip(1))
                {
                    <div class="carousel-item">
                        <img class="d-block w-100" src="@slide.ImagePath" />
                        <div class="box-shadow-gradient"></div>
                        <div class="carousel-caption d-block d-flex justify-content-start mb-4">
                            <div class="carousel-item-content text-start">
                                <p class="carousel-title">
                                    @slide.Title
                                </p>
                                <p>@slide.Description</p>
                                <button class="btn btn-outline-light py-3 px-5 mt-2">Посмотреть каталог</button>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>

        <div class="container-fluid bg-grey rounded d-flex justify-content-evenly mt-4 mb-5 py-5 dignity-box">
            <div>
                <img src="~/icons/percent.svg" />
                <p class="align-self-end m-0">
                    Акции и скидки для
                    <br />
                    постоянных клиентов
                </p>

            </div>

            <div class="vr"></div>
            <div>
                <img class="mb-2" src="~/icons/star.svg" />
                <p class="align-self-end m-0">
                    Качественные услуги
                    <br />
                    и сервис
                </p>
            </div>

            <div class="vr"></div>

            <div>
                <img src="~/icons/table.svg" style="padding-top:10px" />
                <p class="align-self-end m-0">
                    Широкий ассортимент
                    <br />
                    товаров
                </p>
            </div>

        </div>

        <div class="container-fluid">
            <h4 class="mb-4">Популярные категории</h4>

            <div class="row container-fluid table-fixed population-items-container">
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/dress.png" />
                        </div>
                        <p>
                            Одежда
                        </p>
                    </a>
                </div>
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/furniture.png" />
                        </div>
                        <p>
                            Мебель
                        </p>
                    </a>
                </div>
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/household.png" />
                        </div>
                        <p>
                            Бытовая техника
                        </p>
                    </a>
                </div>
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/sporting-goods.png" />
                        </div>
                        <p>
                            Спортивные товары
                        </p>
                    </a>
                </div>
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/cosmetics.png" />
                        </div>
                        <p>
                            Косметика
                        </p>
                    </a>
                </div>
                <div class="col-4 p-0 border population-item">
                    <a href="#" class="population-item-image">
                        <div class="population-item-image-container">
                            <img src="~/images/categories/garden-equipment.png" />
                        </div>
                        <p>
                            Садовая техника
                        </p>
                    </a>
                </div>
            </div>
        </div>

        <div class="container-fluid mt-5">
            <div class="d-flex justify-content-evenly align-items-center">
                <h4 class="mb-4">Новинки</h4>

                <a class="ms-auto primary-color text-decoration-none pe-2">
                    <small>Посмотреть все новинки</small>
                </a>
            </div>

            <div class="swiper py-5">
                <div class="swiper-wrapper">
                    @{
                        var totalNewProductSlides = Model.NewProducts.Count / 3;

                        int newProductCounter = 0;
                    }

                    @for (int currentSlide = 0; currentSlide < totalNewProductSlides; currentSlide++)
                    {
                        <div class="swiper-slide">
                            <div class="d-flex">

                                @for (int i = 0; i < 3; i++)
                                {
                                    var currentProductIndex = i + newProductCounter;

                                    var newProduct = Model.NewProducts.ElementAt(currentProductIndex);

                                    <div class="row">
                                        <div class="col d-flex align-content-evenly flex-wrap align-items-center">
                                            <div class="carousel slide-item-carousel" id="new-carousel-1" data-bs-ride="carousel">
                                                <ol class="carousel-indicators justify-content-center m-0">
                                                    <li class="active" data-bs-target="#new-carousel-@currentProductIndex" data-bs-slide-to="0"></li>

                                                    @for (int j = 0; j < newProduct.Images.Count; j++)
                                                    {
                                                        <li data-bs-target="#new-carousel-@currentProductIndex" data-bs-slide-to="@j"></li>
                                                    }
                                                </ol>

                                                <div class="carousel-inner slide-item-carousel">

                                                    @{
                                                        var firstImage = newProduct.Images.First();

                                                        <div class="carousel-item active">
                                                            <img src="@firstImage" />
                                                        </div>
                                                    }

                                                    @foreach (var image in newProduct.Images.Skip(1))
                                                    {
                                                        <div class="carousel-item">
                                                            <img src="image" />
                                                        </div>
                                                    }

                                                </div>
                                            </div>

                                            <div class="d-flex flex-column rating-container">
                                                <p>
                                                    @newProduct.Name
                                                </p>

                                                <div class="d-flex rating gap-1" stars-amount="@newProduct.Rating"></div>

                                                <div class="d-flex flex-column mt-auto">

                                                    @if (newProduct.InStock)
                                                    {
                                                        <small class="m-0 pt-4 stock">В наличии</small>
                                                    }
                                                    else
                                                    {
                                                        <small class="m-0 pt-4 out">Нет в наличии</small>
                                                    }

                                                    <div class="d-flex justify-content-between">
                                                        <h4 class="m-0">@newProduct.FormattedPrice руб.</h4>

                                                        @if (newProduct.InStock)
                                                        {
                                                            <a class="nav-link secondary p-0 d-flex align-items-center gap-2 c-pointer" data-item-id="@newProduct.Id" onclick="addToCart(this.getAttribute('data-item-id'))">
                                                                <img src="/icons/shop-cart.svg">
                                                                <span>
                                                                    В корзину
                                                                </span>
                                                            </a>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>

                        newProductCounter += 3;
                    }

                    <div class="swiper-button-prev"></div>
                    <div class="swiper-button-next"></div>
                </div>
            </div>
        </div>

        <div class="container-fluid mt-5">
            <div class="d-flex justify-content-evenly align-items-center">
                <h4 class="mb-4">Хиты продаж</h4>

                <a class="ms-auto primary-color text-decoration-none pe-2">
                    <small>Посмотреть все хиты продаж</small>
                </a>
            </div>

            <div class="swiper py-5">
                <div class="swiper-wrapper">

                    @{
                        var totalBestsellerSlides = Model.Bestsellers.Count / 3;

                        int bestsellerProductCounter = 0;
                    }

                    @for (int currentSlide = 0; currentSlide < totalBestsellerSlides; currentSlide++)
                    {
                        <div class="swiper-slide">
                            <div class="d-flex">
                                @for (int i = 0; i < 3; i++)
                                {
                                    var currentProductIndex = i + bestsellerProductCounter;

                                    var bestSellerProduct = Model.Bestsellers.ElementAt(currentProductIndex);

                                    <div class="row">
                                        <div class="col d-flex align-content-evenly flex-wrap align-items-center">
                                            <div class="carousel slide-item-carousel" id="new-carousel-1" data-bs-ride="carousel">
                                                <ol class="carousel-indicators justify-content-center m-0">
                                                    <li class="active" data-bs-target="#bestseller-carousel-@currentProductIndex" data-bs-slide-to="0"></li>

                                                    @for (int j = 0; j < bestSellerProduct.Images.Count; j++)
                                                    {
                                                        <li data-bs-target="#bestseller-carousel-@currentProductIndex" data-bs-slide-to="@j"></li>
                                                    }
                                                </ol>

                                                <div class="carousel-inner slide-item-carousel">

                                                    @{
                                                        var firstImage = bestSellerProduct.Images.First();

                                                        <div class="carousel-item active">
                                                            <img src="@firstImage" />
                                                        </div>
                                                    }

                                                    @foreach (var image in bestSellerProduct.Images.Skip(1))
                                                    {
                                                        <div class="carousel-item">
                                                            <img src="@image" />
                                                        </div>
                                                    }
                                                </div>
                                            </div>

                                            <div class="d-flex flex-column rating-container">
                                                <p>
                                                    @bestSellerProduct.Name
                                                </p>

                                                <div class="d-flex rating gap-1" stars-amount="@bestSellerProduct.Rating"></div>

                                                <div class="d-flex flex-column mt-auto">

                                                    @if (bestSellerProduct.InStock)
                                                    {
                                                        <small class="m-0 pt-4 stock">В наличии</small>
                                                    }
                                                    else
                                                    {
                                                        <small class="m-0 pt-4 out">Нет в наличии</small>
                                                    }

                                                    <div class="d-flex justify-content-between">
                                                        <h4 class="m-0">@bestSellerProduct.FormattedPrice руб.</h4>

                                                        @if (bestSellerProduct.InStock)
                                                        {
                                                            <a class="nav-link secondary p-0 d-flex align-items-center gap-2 c-pointer" data-item-id="@bestSellerProduct.Id" onclick="addToCart(this.getAttribute('data-item-id'))">
                                                                <img src="/icons/shop-cart.svg">
                                                                <span>
                                                                    В корзину
                                                                </span>
                                                            </a>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>

                        bestsellerProductCounter += 3;
                    }

                </div>
                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>
            </div>
        </div>

        <div class="d-flex">
            <nav class="align-items-center">
                <ul class="pagination text-center align-items-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#">
                            <img src="~/icons/arrow-previous.svg" />
                        </a>
                    </li>
                    <li class="page-item disabled"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">
                            <img src="~/icons/arrow-next.svg" />
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="ms-auto d-flex align-items-center">
                <p class="me-5 my-0">Вы посмотрели 24 из 1045 товаров</p>
                <button class="btn btn-secondary-wide">Показать еще</button>
            </div>
        </div>

        <div class="d-flex mt-5 pe-2">
            <div>
                <h4 class="mb-4" style="width:70%;">INTEC:Universe LITE - интернет-магазин с конструктором дизайна на редакции 1C-Битрикс «СТАРТ»</h4>

                <p style="width:85%;">
                    INTEC.UniverseLite - первый конструктор интернет-магазинов на редакции «СТАРТ» 1C-Битрикс. Решение идеально подойдет для быстрого запуска современного и многофункционального интернет-магазина на редакции «СТАРТ», без лишних расходов и привлечения сторонних специалистов. INTEC.UniverseLite может легко трансформироваться в отраслевое решение любой сферы бизнеса
                </p>

                <a class="primary-color text-decoration-none">Подробнее</a>
            </div>

            <img class="ms-auto h-50" src="~/images/advertisement/advertisement.png" />

        </div>

        <div class="mt-5">
            <h4 class="mb-4">Статьи</h4>

            <div class="row">

                @foreach (var article in Model.Articles)
                {
                    <div class="col-4 d-flex align-content-evenly flex-wrap">
                        <img class="align-self-center" src="@article.ImagePath" />

                        <div class="align-self-end">
                            <p class="article-title">
                                @article.Title
                            </p>
                            <small class="secondary">
                                @article.Description
                            </small>
                        </div>
                    </div>
                }
            </div>

        </div>

        <div class="mt-5">
            <h5 class="mb-4" style="font-size:18px;">Широкий ассортимент и высокое качество</h5>

            <div class="position-relative" style="font-size:14px;">
                <p>
                    Каждый из нас понимает очевидную вещь: постоянное информационно-пропагандистское обеспечение нашей деятельности требует определения и уточнения дальнейших направлений развития. Как уже неоднократно упомянуто, базовые сценарии поведения пользователей, которые представляют собой яркий пример континентально-европейского типа политической культуры, будут рассмотрены исключительно в разрезе маркетинговых и финансовых предпосылок. Являясь всего лишь частью общей картины, непосредственные участники технического прогресса рассмотрены исключительно в разрезе маркетинговых и финансовых предпосылок.
                </p>
                <div class="box-shadow-gradient-lignt"></div>
            </div>

            <a class="primary-color mt-2 text-decoration-none" style="font-size:12px;">Читать далее</a>
        </div>
    </div>
</div>

<div class="d-flex justify-content-center text-center bg-primary p-5 break-out">
    <span class="p-0 m-0 align-self-center">Подписка на новости</span>
    <input type="email" class="form-control mx-3" style="max-width:400px;">
    <button class="btn btn-primary btn-primary-dark">Подписаться</button>
</div>

<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index:1">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-bs-delay="5000">
        <div class="toast-body d-flex justify-content-between bg-primary rounded">
            Товар успешно добавлен в корзину
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
    </div>
</div>

@section scripts{
    <script language="JavaScript" type="text/javascript">
        $(document).ready(function () {
            $('#productsCatalog').addClass('menu-disabled');
        })
    </script>

    <script type="text/javascript">
        VK.Widgets.Group("vk_groups", { mode: 3, height: 400, color1: "FFFFFF", color2: "000000", color3: "5181B8" }, 14532206);
    </script>
}